@page
@using ScholarStack.Models
@model ScholarStack.Pages.DashboardModel
@{
    ViewData["Title"] = "Admin Dashboard";
}

@section Styles {
    <link rel="stylesheet" href="css/dashboard/dashboard.css" />
}

<section>
	<div class="gap gray-bg">
		<div class="container-fluid">
			<div class="row">
				<div class="col-lg-12">
					<div class="row" id="page-contents">
						<div class="col-lg-3">
							<aside class="sidebar static">
								<div class="widget">
									<h4 class="widget-title">Statistics</h4>
									<ul class="naves">
										<li>
											<i class="ti-clipboard"></i>
											<a href="#" title="">Community Posts (@Model.Statistics.CommunityPostsCount)</a>
										</li>
										<li>
											<i class="ti-clipboard"></i>
											<a href="#" title="">Resource Posts (@Model.Statistics.ResourcePostsCount)</a>
										</li>
										<li>
											<i class="ti-files"></i>
											<a href="#" title="">Registered Users (@Model.Statistics.RegisteredUsers)</a>
										</li>
										<li>
											<i class="ti-clipboard"></i>
											<a href="#" title="">Managers (@Model.Statistics.ManagersCount)</a>
										</li>
										<li>
											<i class="ti-clipboard"></i>
											<a href="#" title="">Promoted Posts (0)</a>
										</li>
									</ul>
								</div><!-- Shortcuts -->
							</aside>
						</div><!-- sidebar -->
						<div class="col-lg-6">
							<div class="central-meta">
								<div class="card">
									<div class="card-header">
										<h5 class="card-title">Support Tickets</h5>
									</div>
									<div class="card-body">
										<ul class="list-group">
										<li class="list-group-item">
											<div class="row">
											<div class="col-md-8">
												<h6 class="ticket-title">Issue with login page</h6>
												<p class="ticket-description">From: researcher@@scholarstack.org <br>Users are unable to log in to their accounts</p>
												<small class="text-muted">Opened on 05/12/2023 at 10:30 AM</small>
											</div>
											<div class="col-md-2">
												<div class="dropdown">
												<button class="btn btn-info dropdown-toggle" type="button" id="ticket1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
													Open
												</button>
												<div class="dropdown-menu" aria-labelledby="ticket1">
													<a class="dropdown-item" href="#">Open</a>
													<a class="dropdown-item" href="#">In Progress</a>
													<a class="dropdown-item" href="#">Resolved</a>
												</div>
												</div>
											</div>
											</div>
										</li>
										<li class="list-group-item">
											<div class="row">
											<div class="col-md-8">
												<h6 class="ticket-title">Error message when submitting form</h6>
												<p class="ticket-description">From: researcher@@scholarstack.org <br>Form submissions are resulting in an error message</p>
												<small class="text-muted">Opened on 05/10/2023 at 2:15 PM</small>
											</div>
											<div class="col-md-2">
												<div class="dropdown">
												<button class="btn btn-warning dropdown-toggle" type="button" id="ticket2" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
													In Progress
												</button>
												<div class="dropdown-menu" aria-labelledby="ticket2">
													<a class="dropdown-item" href="#">Open</a>
													<a class="dropdown-item" href="#">In Progress</a>
													<a class="dropdown-item" href="#">Resolved</a>
												</div>
												</div>
											</div>
											</div>
										</li>
										<li class="list-group-item">
											<div class="row">
											<div class="col-md-8">
												<h6 class="ticket-title">Feature request: Add dark mode</h6>
												<p class="ticket-description">From: researcher@@scholarstack.org <br>Can you add a dark mode option to the app?</p>
												<small class="text-muted">Opened on 05/08/2023 at 9:45 AM</small>
											</div>
											<div class="col-md-2">
												<div class="dropdown">
												<button class="btn btn-success dropdown-toggle" type="button" id="ticket3" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
													Resolved
												</button>
												<div class="dropdown-menu" aria-labelledby="ticket3">
													<a class="dropdown-item" href="#">Open</a>
													<a class="dropdown-item" href="#">In Progress</a>
													<a class="dropdown-item" href="#">Resolved</a>
												</div>
												</div>
											</div>
											</div>
										</li>
										<li class="list-group-item">
											<div class="row">
											<div class="col-md-8">
												<h6 class="ticket-title">Bug: App crashes when navigating to settings page</h6>
												<p class="ticket-description">From: researcher@@scholarstack.org <br>The app crashes when users navigate to the settings page</p>
												<small class="text-muted">Opened on 05/06/2023 at 4:20 PM</small>
											</div>
											<div class="col-md-2">
												<div class="dropdown">
												<button class="btn btn-info dropdown-toggle" type="button" id="ticket4" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
													Open
												</button>
												<div class="dropdown-menu" aria-labelledby="ticket4">
													<a class="dropdown-item" href="#">Open</a>
													<a class="dropdown-item" href="#">In Progress</a>
													<a class="dropdown-item" href="#">Resolved</a>
												</div>
												</div>
											</div>
											</div>
										</li>
										</ul>
									</div>
								</div>
							</div><!-- Support Tickets Box -->
							
							<div class="central-meta">
								<div class="container-fluid">
									<div class="row">
										<div class="col-md-12">
										<h3>Users Management</h3>
										</div>
									</div>
									<div class="row">
										<div class="col-md-12">
										<div class="table-responsive">
											<table class="table table-hover">
											<thead>
												<tr>
												<th>Name</th>
												<th>Email</th>
												<th>Role</th>
												<th>Actions</th>
												</tr>
											</thead>
											<tbody>
												@foreach (User user in Model.Users)
												{
													<tr>
														<td>@user.FirstName @user.LastName</td>
														<td>@user.Email</td>
														<td>@user.Role.Name</td>
														<td>
															<button class="btn btn-danger btn-sm" data-toggle="modal" data-target="#deleteUserModal">
															<i class="fa fa-trash"></i> Delete
															</button>
															<button class="btn btn-warning btn-sm" data-toggle="modal" data-target="#banUserModal">
															<i class="fa fa-ban"></i> Ban
															</button>
															<button class="btn btn-success btn-sm" data-toggle="modal" data-target="#activateUserModal">
															<i class="fa fa-check"></i> Activate
															</button>
														</td>
													</tr>
												}
											</tbody>
											</table>
										</div>
										</div>
									</div>

									<!-- Delete User Modal -->
									<div class="modal fade" id="deleteUserModal" tabindex="-1" role="dialog" aria-labelledby="deleteUserModalLabel"
										aria-hidden="true">
										<div class="modal-dialog modal-dialog-centered" role="document">
										<div class="modal-content">
											<div class="modal-header">
											<h5 class="modal-title" id="deleteUserModalLabel">Delete User</h5>
											<button type="button" class="close" data-dismiss="modal" aria-label="Close">
												<span aria-hidden="true">&times;</span>
											</button>
											</div>
											<div class="modal-body">
											Are you sure you want to delete this user?
											</div>
											<div class="modal-footer">
											<button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
											<button type="button" class="btn btn-danger">Delete</button>
											</div>
										</div>
										</div>
									</div>

									<!-- Ban User Modal -->
									<div class="modal fade" id="banUserModal" tabindex="-1" role="dialog" aria-labelledby="banUserModalLabel"
										aria-hidden="true">
										<div class="modal-dialog modal-dialog-centered" role="document">
										<div class="modal-content">
											<div class="modal-header">
											<h5 class="modal-title" id="banUserModalLabel">Ban User</h5>
											<button type="button" class="close" data-dismiss="modal" aria-label="Close">
												<span aria-hidden="true">&times;</span>
											</button>
											</div>
											<div class="modal-body">
											Are you sure you want to ban this user?
											</div>
											<div class="modal-footer">
											<button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
											<button type="button" class="btn btn-warning">Ban</button>
											</div>
										</div>
										</div>
									</div>
							</div><!-- User Management Box -->
							
						</div><!-- centerl meta -->
					</div>	
				</div>
			</div>
		</div>
	</div>	
</section>